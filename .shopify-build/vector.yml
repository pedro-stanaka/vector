containers:
  default:
    docker: cimg/rust:1.64.0-node

steps:
  - label: Prepare and Build Vector
    timeout: 30m
    run:
    - rustup target add x86_64-unknown-linux-gnu
    # - make package-x86_64-unknown-linux-gnu-all
    - cargo build --target=x86_64-unknown-linux-gnu --release
    cache:
    - ~/.cargo/registry
    - ~/.cargo/git
    - target